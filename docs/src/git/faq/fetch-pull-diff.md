# git fetch 和 git pull 的区别

## 1. git 的工作流

> 为了更好地理解，这里先看看 git 的工作流

1. 开发过程中的 3 个仓库/副本：

   - 本地工作目录

     也就是我们开发过程中正在编辑的工作目录

   - 本地仓库

     由于 git 是分布式的，所以每个开发者本地都会有一个本地仓库，当通过 `git commit` 提交代码时，更改就从本地目录提交到了本地仓库

     > 其实在本地仓库中存在一个暂存区域，更改文件后，`git add`后会将文件的更新存储在暂存区，此时可以使用 `git restore --staged` 来将文件的更新撤销到工作目录，也可以使用 `git commit` 来讲文件的更新提交都本地仓库，这里就不赘述了。

   - 远程仓库

     远程服务器上存储的仓库，例如 github，当通过 `git push` 推送时，就会将本地仓库的更新推送到远程仓库。

2. git 的基本工作流程

   - 在工作目录中修改文件

   - 提交更新，此时更新到了本地仓库

   - 推送更新，此时会将本地仓库推送到远程仓库

     > 这时候本地仓库会和远程仓库进行比较

## 2. git fetch 和 git pull

多人协同开发时，其中一个开发者将代码推送到远程仓库后，其他人 push 时就会发生冲突，所以在 push 之前，一般需要先将最新的远程仓库重新拉取一下，这时候，就会使用到 `git pull` 和 `git fetch`，这两个命令都是拉取最新的远程仓库到本地，那它们有什么不同呢？

> 这里讲同一个分支哈

1. `git fetch`

   在拉取代码过程时，`git fetch`  会先检查本地仓库和远程仓库的差异，然后将拉取到**本地仓库**。

   **请注意**，是将差异拉取到**本地仓库**，而不是**本地工作目录**，它不会将差异合并到当前工作目录中，此时，还需要执行 `git merge` 操作才能将这些差异合并到当前工作目录。

2. `git pull`

   在拉取代码过程时，`git pull`  会先检查本地仓库和远程仓库的差异，然后将差异拉取到**本地仓库**并且**自动地将差异合并到本地工作目录**，这个合并过程**不会经过审查**，因此，当有冲突时，这个过程并不会出现冲突提示。

那么如何使用呢？

相较 `git pull`，`git fetch` 更加的安全，虽然需要开发者多执行一个命令，但这样可以让开发者在合并前检查文件的变化和冲突。

因此，跑跑建议：

- 如果是多人协作的场景，优选 `git fetch`，这样便于检查文件差异和冲突
- 如果是单人项目，优选 `git pull`，个人项目一般不存在冲突
