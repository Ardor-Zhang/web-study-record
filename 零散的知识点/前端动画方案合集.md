[toc]

# 方案合集

在工作中发现，前端框架的不断流行使得很多前端开发者更擅长于同时也更愿意投入精力去开发中后台的系统，这并无不妥，只是长期开发中后台的应用会造成一个问题 —— 由于中后台应用对于 UI 的要求都不高，几乎用 UI 组件库就能满足，因此渐渐的就丢掉了这一基础：UI 和 动画。

> 手动狗头，笔者就是典型的案例

UI 和 动画 可谓是前端的最最基础的。笔者经常看到很多酷炫的动画，看着真的很舒服，总会想想自己能写出来吗？多半的回答是，很难，仅仅用 css 提供的 `animation` 和 `transition` 几乎不可能，那怎么做呢？有哪些方案能写出酷炫的动画呢？本文就来整理一番业界的动画制作方案：

## 1. 动画基础方案

业界有非常多的动画方案，但归根结底，都是以下五种的封装或组合：

1. css

   css 提供的 `animation` 和 `transition` 能够实现基础的动画。

   - 可以使用 js 来控制
   - 制作简单的动画非常方便且性能很好，但是复杂的动画实现较难

2. canvas

   html5 的新特性之一

   - 高效率、高性能及高可用
   - 可用于处理复杂动画，但不支持事件处理

3. svg

   - 矢量图，放大不失真
   - 支持事件处理

4. gif

5. video

## 2. 业界方案

1. CSS3 

   **适用场景：** 纯CSS方案适合一些简单的动画，包括页面切换，位置、大小的变化等。

   **说明：** 可以使用transition/animation属性，设置相应的关键帧状态，并且借助一些缓动函数来进行实现一些简单化的动画。

   **优点：** 开发成本低，无需引入其他依赖。

   **缺点：** 只适用一些简单动画，无法实现复杂动画。

2. [Animate.css](https://animate.style/)

   **适用场景：** 适用于一些展示型动效，且动效自定义要求不高

   **说明：** animate.css是个非常丰富的动效基础库，内置了很多动效效果，使用方法也很简单，几乎没有学习成本，只有给需要加动效的dom加上animate__animated 以及需要添加的动效类例如animate__bounce即可，类的添加当然也可以使用js加，这样就能实现简单的交互效果。

   **优点：** 使用简单，学习成本低，动效丰富

   **缺点**：

   - animated.css 官方提供了几十种动效，但是总会遇到一些动效可能需要修改，或者有些动效库中没有提供。这个时候，animate.css就显得有点吃力了，因为目前没提供自定义的动画api。
   - 假如我们dom结构已经有 tranform或者其他相关的css设置，这个时候通过添加animted的动画类，那么我们原来的css效果会被覆盖。解决方案只能是在dom的外围再用一个div.wrap包含着然后把动画效果加载.wrap中来避免覆盖原有效果。

3. [Anime.js](https://animejs.com/)

   **适用场景**：适用于一些简单的动效和弱交互型动画

   **说明**：anime.js提供非常丰富的自定义参数，动画目标不仅支持css选择器、dom和dom list，还支持js对象、数组，是个非常强大的动效库，使用方式也比较简单

   **优点：**

   - anime.js不仅实现了CSS3动画的深度封装，更多的是通过js驱动来实现操作动画的状态，timeline实现了对于多个分支动画的管理，对于实现更为复杂的动画提供了可能；
   - 通过anime.js提供的playback controls和callback，同时对于promise的支持，让我们对于动画的简单交互有了操作的空间；
   - 虽然不支持canvas，但是支持svg绘制路径；

   **缺点：** anime更适合做展示型动画和小型交互动画，对于一些具有大量交互的的场景或者表现细腻的动画不具优势。

4. [Lottie](http://airbnb.io/lottie/#/web)

   **适用场景：** 复杂的展示型动画

   **说明：** 设计师通过 AE 上的 Bodymovin 插件将 AE 中制作好的动画导出成一个 json 文件，通过Lottie对JSON进行解析，最后以SVG/canvas/html的方式渲染动画。使用也很简单

   **优点：**

   - 跨平台，一次绘制、一次转换、可以多端使用；
   - 文件更小，获取AE导出的JSON，支持渲染为canvas/svg/html格式；
   - 性能好，端上除了解析json，基本没有其他耗性能的操作；
   - 动画都是在After Effects中创建的，使用Bodymovin导出，开发基本无需关心动画设计与展示的问题；

   **缺点：**

   - Lottie动画不能进行交互；
   - Lottie动画端上也无法进行编辑；
   - Lottie文字支持较差；
   - Lottie不支持压缩位图，如果使用png等位图，需要自行在[tiny](https://tinypng.com/)等压缩平台进行图片压缩、降低包体积；
   - Lottie存在mask、matters 时，性能会受到较大影响；

5. Apng

   **适用场景：** 复杂的展示型动画以及部分交互动画

   **说明：** 说起动图可能大家首先想到的是gif格式的图片，apng也可以说是gif更优的替代。apng是Mozilla公司推出的一种图片格式，与gif相比，具有更高清的表现，更小的体积，且天生向下兼容png，如果浏览器不支持apng则会显示首帧png图片。目前png组织并未承认apng，但大部分浏览器都已支持apng格式，并且使用apng-canvas等插件能对apng进行canvas兼容，基本不用担心兼容问题，总的来说apng还是一种非常不错的动画方案。（GIF - 1987、JPEG - 1992、PNG - 1996、APNG - 2004、WebP - 2010）

   不同格式图片比较：http://littlesvr.ca/apng/gif_apng_webp5.html

   **优点：**

   - 体积小；
   - 由于是逐帧动画，能实现复杂、细腻的动画；
   - 配合apng-js、apng-canvas等库能实现一些交互效果；
   - 制作以及使用apng都相对简单

   **缺点：**

   - 解析apng帧需要时间；
   - 兼容性（相对gif）；
   - 不太适合太强交互的动画

6. 视频

   **适用场景：** 适用于一些播放场景固定的展示型动画

   **说明：** 视频其实也是一种实现动画的一种方式，很多以为是使用了动画库的场景实际上是用了视频来实现。如下图的看点小区人来车往的背景动画，实际上是若干个视频的组合，这里的衔接几乎是无缝的，再和动态化框架配合，监听点击区域就能实现各种点击交互。视频实现优点还是比较明显，同时如果想用视频作为动画方案也有一些的前提条件和限制。

   **优点：**

   - 能实现很高的压缩率，获得更小的体积；
   - 兼容性比较好，一个视频多平台都可以使用；
   - 视频制作以及前端播放简单；
   - 能与端配合完成一些复杂的交互，以及优化；

   **缺点：**

   - 依赖播放平台，不同平台上视频的最终播放形式可能不同，需要固定播放场景；
   - 交互以及视频之间的衔接比较困难；

7. [GSAP](https://greensock.com/docs/v3/GSAP)

   **适用场景：** 与anime.js类似，通常配合pixijs、threejs等库一起使用，实现更为复杂的动画

   **说明：** GSAP是GreenSock 提供的一个相当健壮的库，其中包含您项目可能需要的几乎任何类型效果的动画。 `gsap.to(".box", {rotation: 27, x: 100, duration: 1});` **优点：** 更丰富的api，为实现更复杂的动画提供可能性；能很好配合pixijs等引擎库； **缺点：** 复杂的api可能会让初学者望而生畏，gsap、linear等库完全解耦，学习成本相对更大

8. [Pixi.js](https://pixijs.com/)

   **适用场景：** 交互型动画，动画小游戏

   **说明：** PixiJS是一个2D 渲染引擎， Pixi 主要负责渲染画面。可以创建丰富的交互式图形，动画和游戏，而无需深入了解WebGL API或处理浏览器和设备兼容性的问题。与此同时，PixiJS具有完整的WebGL支持，如果需要，可以无缝地回退到HTML5的canvas。具有丰富的交互事件，比如完整的鼠标和移动端的触控事件。Pixi是个非常强大的库，其强大之处这个[GD平台](https://editor.gdevelop-app.com/)或许可以窥见一二。

   **优点：**

   - 最大优势莫过于通过WebGL来调用GPU渲染动画，这样极大的提升了性能
   - 无需深入了解WebGL API或者是浏览器兼容性；
   - 支持canvas回退，当前设备不支持WebGL时，PixiJs会使用canvas渲染动画；
   - 完整的docs，比较活跃的社区，有利于深入的学习。

   **缺点：**

   - Pixi 主要负责渲染画面，很多其它功能开发者得自己写或搭配其它库来使用；
   - 功能丰富，学习成本自然也高；
   - 动画加载前需要先加载资源进stage，资源比较多时比较耗时；

9. [Three.js](https://threejs.org/docs/index.html#manual/zh/introduction/Creating-a-scene)

   **适用场景：** 3D动画

   **说明：** Three.js是一款webGL框架，Three.js在WebGL的api接口基础上，又进行的一层封装。相当于js和JQuery的关系，学习webgl需要图形学知识，而webgl需要通过js和glsl两种语言。如果我们不通过threejs使用webgl势必逃不过底层知识，而有了Three.js就可以大大减少了3d开发所需的专业知识储备。

   - Three.js掩盖了3D渲染的细节：Three.js将WebGL原生API的细节抽象化，将3D场景拆解为网格、材质和光源(即它内置了图形编程常用的一些对象种类)。
   - 面向对象：开发者可以使用上层的JavaScript对象，而不是仅仅调用JavaScript函数。
   - 功能非常丰富：Three.js除了封装了WebGL原始API之外，Three.js还包含了许多实用的内置对象，并内置了常用着色器。
   - 速度很快：Three.js采用了3D图形最佳实践来保证在不失可用性的前提下，保持极高的性能。
   - 支持交互：WebGL本身并不提供拾取（picking)功能（即是否知道鼠标正处于某个物体上）。而Three.js则固化了拾取支持，这就使得你可以轻松为你的应用添加交互功能。
   - 包含数学库：Three.js拥有一个强大易用的数学库，你可以在其中进行矩阵、投影和矢量运算。
   - 内置文件格式支持：你可以使用流行的3D建模软件导出fbx格式或其他格式的文件，然后使用Three.js加载
   - 支持HTML5 canvas：Three.js不但支持WebGL，而且还支持使用Canvas2D、Css3D和SVG进行渲染。

   **缺点：**

   - 官网文档非常粗糙，对于新手极度不友好；
   - 国内的相关资源匮乏。Three.js资料以英文为主，并且大版本之间代码变更导致很多demo运行不起来；
   - Three.js 对于游戏开发功能需要进行二次开发；
   - 对于商业落地仍成本很大。

## 3. 库

1. [Bounce.js](http://bouncejs.com/)
   - Star：6.2k
   - 一个用于生成由 CSS3 驱动的好看的关键帧动画的工具和 JS 库。它不仅仅是一个库，还是一个生成CSS代码的工具， 是为数不多的可以直接在浏览器中进行设计和设置的动画库之一
   - Bounce.js支持直接在浏览器中进行设计和设置，带有一个完整的网页构建器，只需添加一个组件，选择预设，然后你就可以得到CSS 代码了
2. [Magic Animations](https://www.minimamente.com/project/magic/)
   - Star：7.3k
   - 作者介绍是具有特殊效果的CSS3动画，可以看成一个非常大的CSS3代码库合集，并且有些在其他库里根本找不到
   - 与Animate.css十分类似，也是一个预定义了一系列动效的CSS库。与Animate.css的最大区别可能是，它定义的那些动效更炫也更酷一些
3. [AniJS](http://anijs.github.io/#welcome)
   - Star：3.7k
   - 一个使用方式比较特别的动效库
   - 号称“无需编码即可提升网页设计的图书馆”，通过 if、on、do、to 等简单的命令更加直观地处理动效还能用来控制前面 Animate.css 来创造动效。
4. [CSShake](https://elrumordelaluz.github.io/csshake/)
   - Star：4.6k
   - 一个专门用于增加颤动效果的动效库，可以为一个元素增加包括不同方向（水平、上下），类型（固定、疯狂），强度（强、弱）等的抖动效果
   - 动画库里带的一些动画效果非常的疯狂、独特，不一定适合每个网站，但一些柔和的抖动能在一些场景能用得上
5. [Hover.css](http://ianlunn.github.io/Hover/)
   - Star：25.8k
   - 一个专门提供鼠标悬浮效果的动效库。提供了大量的Hover效果，包括2D变换，图标变换，背景变换等等。而且几乎可以应用于所有元素，包括链接，按钮，logo，SVG甚至图片等等
6. [scrollreveal.js](https://scrollrevealjs.org/)
   - Star：20k
   - 一款特定动画的JavaScript库
   - 拥有非常酷炫的进场效果
   - 可以创建十分酷炫的滚动特效，是一个轻量级的工具（没有任何依赖）
   - 适用于DOM节点，多个容器，异步内容，并且支持3D旋转。ScrollReveal JS可能是创建滚动特效最好用的工具，兼容性很好，只要支持CSS Transform和CSS Transition特性的浏览器都支持
7. [Single Element CSS Spinners](https://projects.lukehaas.me/css-loaders/)
   - Star：6.8k
   - 一组非常漂亮的可用于加载中状态的CSS3动效
   - 可以直接使用CSS3代码
8. [matter.js](https://brm.io/matter-js/)
   - Star：12.7k
   - 一个接近现实生活中的物理运动、碰撞、惯性的动画库。
   - 在一些特定场所比较有用（如上面提到的网易人格主导色H5的掉落碰撞效果就使用了matter.js）